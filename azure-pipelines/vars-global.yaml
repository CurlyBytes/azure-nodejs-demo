variables:

  # ARM
  armConnection:  nodejs-demo-rg-conn

  # Docker
  dockerRegistry: nodejsdemo.azurecr.io
  imageName:      azure-nodejs-demo
  imageTag:       dev # default

  # Pipeline conditions
  isMain:       ${{ eq(variables['Build.SourceBranch'], 'refs/heads/main') }}
  isTag:        true # ${{ startsWith(variables['Build.SourceBranch'], 'refs/tags/v') }}
  notFork:      ${{ eq(variables['System.PullRequest.IsFork'], 'False') }}
  notPR:        ${{ ne(variables['Build.Reason'], 'PullRequest') }}
  notSchedule:  ${{ ne(variables['Build.Reason'], 'Schedule') }}
  isTrustedCI:  ${{ and(variables.notFork, variables.notPR, variables.notSchedule) }}